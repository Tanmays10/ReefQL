import{d as je,f as Y,h as Ue,e as T,l as I,U as We}from"./vendor.e4ea881c.js";var Z;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647})(Z||(Z={}));var R;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647})(R||(R={}));var S;(function(e){function r(n,t){return n===Number.MAX_VALUE&&(n=R.MAX_VALUE),t===Number.MAX_VALUE&&(t=R.MAX_VALUE),{line:n,character:t}}e.create=r;function i(n){var t=n;return u.objectLiteral(t)&&u.uinteger(t.line)&&u.uinteger(t.character)}e.is=i})(S||(S={}));var b;(function(e){function r(n,t,a,s){if(u.uinteger(n)&&u.uinteger(t)&&u.uinteger(a)&&u.uinteger(s))return{start:S.create(n,t),end:S.create(a,s)};if(S.is(n)&&S.is(t))return{start:n,end:t};throw new Error("Range#create called with invalid arguments["+n+", "+t+", "+a+", "+s+"]")}e.create=r;function i(n){var t=n;return u.objectLiteral(t)&&S.is(t.start)&&S.is(t.end)}e.is=i})(b||(b={}));var H;(function(e){function r(n,t){return{uri:n,range:t}}e.create=r;function i(n){var t=n;return u.defined(t)&&b.is(t.range)&&(u.string(t.uri)||u.undefined(t.uri))}e.is=i})(H||(H={}));var K;(function(e){function r(n,t,a,s){return{targetUri:n,targetRange:t,targetSelectionRange:a,originSelectionRange:s}}e.create=r;function i(n){var t=n;return u.defined(t)&&b.is(t.targetRange)&&u.string(t.targetUri)&&(b.is(t.targetSelectionRange)||u.undefined(t.targetSelectionRange))&&(b.is(t.originSelectionRange)||u.undefined(t.originSelectionRange))}e.is=i})(K||(K={}));var J;(function(e){function r(n,t,a,s){return{red:n,green:t,blue:a,alpha:s}}e.create=r;function i(n){var t=n;return u.numberRange(t.red,0,1)&&u.numberRange(t.green,0,1)&&u.numberRange(t.blue,0,1)&&u.numberRange(t.alpha,0,1)}e.is=i})(J||(J={}));var ee;(function(e){function r(n,t){return{range:n,color:t}}e.create=r;function i(n){var t=n;return b.is(t.range)&&J.is(t.color)}e.is=i})(ee||(ee={}));var te;(function(e){function r(n,t,a){return{label:n,textEdit:t,additionalTextEdits:a}}e.create=r;function i(n){var t=n;return u.string(t.label)&&(u.undefined(t.textEdit)||k.is(t))&&(u.undefined(t.additionalTextEdits)||u.typedArray(t.additionalTextEdits,k.is))}e.is=i})(te||(te={}));var ne;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(ne||(ne={}));var re;(function(e){function r(n,t,a,s,o){var l={startLine:n,endLine:t};return u.defined(a)&&(l.startCharacter=a),u.defined(s)&&(l.endCharacter=s),u.defined(o)&&(l.kind=o),l}e.create=r;function i(n){var t=n;return u.uinteger(t.startLine)&&u.uinteger(t.startLine)&&(u.undefined(t.startCharacter)||u.uinteger(t.startCharacter))&&(u.undefined(t.endCharacter)||u.uinteger(t.endCharacter))&&(u.undefined(t.kind)||u.string(t.kind))}e.is=i})(re||(re={}));var B;(function(e){function r(n,t){return{location:n,message:t}}e.create=r;function i(n){var t=n;return u.defined(t)&&H.is(t.location)&&u.string(t.message)}e.is=i})(B||(B={}));var ie;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(ie||(ie={}));var ae;(function(e){e.Unnecessary=1,e.Deprecated=2})(ae||(ae={}));var se;(function(e){function r(i){var n=i;return n!=null&&u.string(n.href)}e.is=r})(se||(se={}));var P;(function(e){function r(n,t,a,s,o,l){var p={range:n,message:t};return u.defined(a)&&(p.severity=a),u.defined(s)&&(p.code=s),u.defined(o)&&(p.source=o),u.defined(l)&&(p.relatedInformation=l),p}e.create=r;function i(n){var t,a=n;return u.defined(a)&&b.is(a.range)&&u.string(a.message)&&(u.number(a.severity)||u.undefined(a.severity))&&(u.integer(a.code)||u.string(a.code)||u.undefined(a.code))&&(u.undefined(a.codeDescription)||u.string((t=a.codeDescription)===null||t===void 0?void 0:t.href))&&(u.string(a.source)||u.undefined(a.source))&&(u.undefined(a.relatedInformation)||u.typedArray(a.relatedInformation,B.is))}e.is=i})(P||(P={}));var F;(function(e){function r(n,t){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var o={title:n,command:t};return u.defined(a)&&a.length>0&&(o.arguments=a),o}e.create=r;function i(n){var t=n;return u.defined(t)&&u.string(t.title)&&u.string(t.command)}e.is=i})(F||(F={}));var k;(function(e){function r(a,s){return{range:a,newText:s}}e.replace=r;function i(a,s){return{range:{start:a,end:a},newText:s}}e.insert=i;function n(a){return{range:a,newText:""}}e.del=n;function t(a){var s=a;return u.objectLiteral(s)&&u.string(s.newText)&&b.is(s.range)}e.is=t})(k||(k={}));var V;(function(e){function r(n,t,a){var s={label:n};return t!==void 0&&(s.needsConfirmation=t),a!==void 0&&(s.description=a),s}e.create=r;function i(n){var t=n;return t!==void 0&&u.objectLiteral(t)&&u.string(t.label)&&(u.boolean(t.needsConfirmation)||t.needsConfirmation===void 0)&&(u.string(t.description)||t.description===void 0)}e.is=i})(V||(V={}));var D;(function(e){function r(i){var n=i;return typeof n=="string"}e.is=r})(D||(D={}));var A;(function(e){function r(a,s,o){return{range:a,newText:s,annotationId:o}}e.replace=r;function i(a,s,o){return{range:{start:a,end:a},newText:s,annotationId:o}}e.insert=i;function n(a,s){return{range:a,newText:"",annotationId:s}}e.del=n;function t(a){var s=a;return k.is(s)&&(V.is(s.annotationId)||D.is(s.annotationId))}e.is=t})(A||(A={}));var U;(function(e){function r(n,t){return{textDocument:n,edits:t}}e.create=r;function i(n){var t=n;return u.defined(t)&&W.is(t.textDocument)&&Array.isArray(t.edits)}e.is=i})(U||(U={}));var M;(function(e){function r(n,t,a){var s={kind:"create",uri:n};return t!==void 0&&(t.overwrite!==void 0||t.ignoreIfExists!==void 0)&&(s.options=t),a!==void 0&&(s.annotationId=a),s}e.create=r;function i(n){var t=n;return t&&t.kind==="create"&&u.string(t.uri)&&(t.options===void 0||(t.options.overwrite===void 0||u.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||u.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||D.is(t.annotationId))}e.is=i})(M||(M={}));var N;(function(e){function r(n,t,a,s){var o={kind:"rename",oldUri:n,newUri:t};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(o.options=a),s!==void 0&&(o.annotationId=s),o}e.create=r;function i(n){var t=n;return t&&t.kind==="rename"&&u.string(t.oldUri)&&u.string(t.newUri)&&(t.options===void 0||(t.options.overwrite===void 0||u.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||u.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||D.is(t.annotationId))}e.is=i})(N||(N={}));var C;(function(e){function r(n,t,a){var s={kind:"delete",uri:n};return t!==void 0&&(t.recursive!==void 0||t.ignoreIfNotExists!==void 0)&&(s.options=t),a!==void 0&&(s.annotationId=a),s}e.create=r;function i(n){var t=n;return t&&t.kind==="delete"&&u.string(t.uri)&&(t.options===void 0||(t.options.recursive===void 0||u.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===void 0||u.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===void 0||D.is(t.annotationId))}e.is=i})(C||(C={}));var $;(function(e){function r(i){var n=i;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(function(t){return u.string(t.kind)?M.is(t)||N.is(t)||C.is(t):U.is(t)}))}e.is=r})($||($={}));var j=function(){function e(r,i){this.edits=r,this.changeAnnotations=i}return e.prototype.insert=function(r,i,n){var t,a;if(n===void 0?t=k.insert(r,i):D.is(n)?(a=n,t=A.insert(r,i,n)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(n),t=A.insert(r,i,a)),this.edits.push(t),a!==void 0)return a},e.prototype.replace=function(r,i,n){var t,a;if(n===void 0?t=k.replace(r,i):D.is(n)?(a=n,t=A.replace(r,i,n)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(n),t=A.replace(r,i,a)),this.edits.push(t),a!==void 0)return a},e.prototype.delete=function(r,i){var n,t;if(i===void 0?n=k.del(r):D.is(i)?(t=i,n=A.del(r,i)):(this.assertChangeAnnotations(this.changeAnnotations),t=this.changeAnnotations.manage(i),n=A.del(r,t)),this.edits.push(n),t!==void 0)return t},e.prototype.add=function(r){this.edits.push(r)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(r){if(r===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),ue=function(){function e(r){this._annotations=r===void 0?Object.create(null):r,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(r,i){var n;if(D.is(r)?n=r:(n=this.nextId(),i=r),this._annotations[n]!==void 0)throw new Error("Id "+n+" is already in use.");if(i===void 0)throw new Error("No annotation provided for id "+n);return this._annotations[n]=i,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}();(function(){function e(r){var i=this;this._textEditChanges=Object.create(null),r!==void 0?(this._workspaceEdit=r,r.documentChanges?(this._changeAnnotations=new ue(r.changeAnnotations),r.changeAnnotations=this._changeAnnotations.all(),r.documentChanges.forEach(function(n){if(U.is(n)){var t=new j(n.edits,i._changeAnnotations);i._textEditChanges[n.textDocument.uri]=t}})):r.changes&&Object.keys(r.changes).forEach(function(n){var t=new j(r.changes[n]);i._textEditChanges[n]=t})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(r){if(W.is(r)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i={uri:r.uri,version:r.version},n=this._textEditChanges[i.uri];if(!n){var t=[],a={textDocument:i,edits:t};this._workspaceEdit.documentChanges.push(a),n=new j(t,this._changeAnnotations),this._textEditChanges[i.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[r];if(!n){var t=[];this._workspaceEdit.changes[r]=t,n=new j(t),this._textEditChanges[r]=n}return n}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ue,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(r,i,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var t;V.is(i)||D.is(i)?t=i:n=i;var a,s;if(t===void 0?a=M.create(r,n):(s=D.is(t)?t:this._changeAnnotations.manage(t),a=M.create(r,n,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},e.prototype.renameFile=function(r,i,n,t){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;V.is(n)||D.is(n)?a=n:t=n;var s,o;if(a===void 0?s=N.create(r,i,t):(o=D.is(a)?a:this._changeAnnotations.manage(a),s=N.create(r,i,t,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},e.prototype.deleteFile=function(r,i,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var t;V.is(i)||D.is(i)?t=i:n=i;var a,s;if(t===void 0?a=C.create(r,n):(s=D.is(t)?t:this._changeAnnotations.manage(t),a=C.create(r,n,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},e})();var oe;(function(e){function r(n){return{uri:n}}e.create=r;function i(n){var t=n;return u.defined(t)&&u.string(t.uri)}e.is=i})(oe||(oe={}));var ce;(function(e){function r(n,t){return{uri:n,version:t}}e.create=r;function i(n){var t=n;return u.defined(t)&&u.string(t.uri)&&u.integer(t.version)}e.is=i})(ce||(ce={}));var W;(function(e){function r(n,t){return{uri:n,version:t}}e.create=r;function i(n){var t=n;return u.defined(t)&&u.string(t.uri)&&(t.version===null||u.integer(t.version))}e.is=i})(W||(W={}));var de;(function(e){function r(n,t,a,s){return{uri:n,languageId:t,version:a,text:s}}e.create=r;function i(n){var t=n;return u.defined(t)&&u.string(t.uri)&&u.string(t.languageId)&&u.integer(t.version)&&u.string(t.text)}e.is=i})(de||(de={}));var L;(function(e){e.PlainText="plaintext",e.Markdown="markdown"})(L||(L={}));(function(e){function r(i){var n=i;return n===e.PlainText||n===e.Markdown}e.is=r})(L||(L={}));var q;(function(e){function r(i){var n=i;return u.objectLiteral(i)&&L.is(n.kind)&&u.string(n.value)}e.is=r})(q||(q={}));var fe;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(fe||(fe={}));var le;(function(e){e.PlainText=1,e.Snippet=2})(le||(le={}));var ge;(function(e){e.Deprecated=1})(ge||(ge={}));var he;(function(e){function r(n,t,a){return{newText:n,insert:t,replace:a}}e.create=r;function i(n){var t=n;return t&&u.string(t.newText)&&b.is(t.insert)&&b.is(t.replace)}e.is=i})(he||(he={}));var pe;(function(e){e.asIs=1,e.adjustIndentation=2})(pe||(pe={}));var ve;(function(e){function r(i){return{label:i}}e.create=r})(ve||(ve={}));var me;(function(e){function r(i,n){return{items:i||[],isIncomplete:!!n}}e.create=r})(me||(me={}));var Q;(function(e){function r(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=r;function i(n){var t=n;return u.string(t)||u.objectLiteral(t)&&u.string(t.language)&&u.string(t.value)}e.is=i})(Q||(Q={}));var _e;(function(e){function r(i){var n=i;return!!n&&u.objectLiteral(n)&&(q.is(n.contents)||Q.is(n.contents)||u.typedArray(n.contents,Q.is))&&(i.range===void 0||b.is(i.range))}e.is=r})(_e||(_e={}));var Ee;(function(e){function r(i,n){return n?{label:i,documentation:n}:{label:i}}e.create=r})(Ee||(Ee={}));var be;(function(e){function r(i,n){for(var t=[],a=2;a<arguments.length;a++)t[a-2]=arguments[a];var s={label:i};return u.defined(n)&&(s.documentation=n),u.defined(t)?s.parameters=t:s.parameters=[],s}e.create=r})(be||(be={}));var De;(function(e){e.Text=1,e.Read=2,e.Write=3})(De||(De={}));var we;(function(e){function r(i,n){var t={range:i};return u.number(n)&&(t.kind=n),t}e.create=r})(we||(we={}));var ye;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(ye||(ye={}));var Se;(function(e){e.Deprecated=1})(Se||(Se={}));var Te;(function(e){function r(i,n,t,a,s){var o={name:i,kind:n,location:{uri:a,range:t}};return s&&(o.containerName=s),o}e.create=r})(Te||(Te={}));var Ae;(function(e){function r(n,t,a,s,o,l){var p={name:n,detail:t,kind:a,range:s,selectionRange:o};return l!==void 0&&(p.children=l),p}e.create=r;function i(n){var t=n;return t&&u.string(t.name)&&u.number(t.kind)&&b.is(t.range)&&b.is(t.selectionRange)&&(t.detail===void 0||u.string(t.detail))&&(t.deprecated===void 0||u.boolean(t.deprecated))&&(t.children===void 0||Array.isArray(t.children))&&(t.tags===void 0||Array.isArray(t.tags))}e.is=i})(Ae||(Ae={}));var ke;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(ke||(ke={}));var xe;(function(e){function r(n,t){var a={diagnostics:n};return t!=null&&(a.only=t),a}e.create=r;function i(n){var t=n;return u.defined(t)&&u.typedArray(t.diagnostics,P.is)&&(t.only===void 0||u.typedArray(t.only,u.string))}e.is=i})(xe||(xe={}));var Ie;(function(e){function r(n,t,a){var s={title:n},o=!0;return typeof t=="string"?(o=!1,s.kind=t):F.is(t)?s.command=t:s.edit=t,o&&a!==void 0&&(s.kind=a),s}e.create=r;function i(n){var t=n;return t&&u.string(t.title)&&(t.diagnostics===void 0||u.typedArray(t.diagnostics,P.is))&&(t.kind===void 0||u.string(t.kind))&&(t.edit!==void 0||t.command!==void 0)&&(t.command===void 0||F.is(t.command))&&(t.isPreferred===void 0||u.boolean(t.isPreferred))&&(t.edit===void 0||$.is(t.edit))}e.is=i})(Ie||(Ie={}));var Ve;(function(e){function r(n,t){var a={range:n};return u.defined(t)&&(a.data=t),a}e.create=r;function i(n){var t=n;return u.defined(t)&&b.is(t.range)&&(u.undefined(t.command)||F.is(t.command))}e.is=i})(Ve||(Ve={}));var Fe;(function(e){function r(n,t){return{tabSize:n,insertSpaces:t}}e.create=r;function i(n){var t=n;return u.defined(t)&&u.uinteger(t.tabSize)&&u.boolean(t.insertSpaces)}e.is=i})(Fe||(Fe={}));var Me;(function(e){function r(n,t,a){return{range:n,target:t,data:a}}e.create=r;function i(n){var t=n;return u.defined(t)&&b.is(t.range)&&(u.undefined(t.target)||u.string(t.target))}e.is=i})(Me||(Me={}));var Ne;(function(e){function r(n,t){return{range:n,parent:t}}e.create=r;function i(n){var t=n;return t!==void 0&&b.is(t.range)&&(t.parent===void 0||e.is(t.parent))}e.is=i})(Ne||(Ne={}));var Ce;(function(e){function r(a,s,o,l){return new Qe(a,s,o,l)}e.create=r;function i(a){var s=a;return!!(u.defined(s)&&u.string(s.uri)&&(u.undefined(s.languageId)||u.string(s.languageId))&&u.uinteger(s.lineCount)&&u.func(s.getText)&&u.func(s.positionAt)&&u.func(s.offsetAt))}e.is=i;function n(a,s){for(var o=a.getText(),l=t(s,function(x,O){var G=x.range.start.line-O.range.start.line;return G===0?x.range.start.character-O.range.start.character:G}),p=o.length,w=l.length-1;w>=0;w--){var y=l[w],g=a.offsetAt(y.range.start),d=a.offsetAt(y.range.end);if(d<=p)o=o.substring(0,g)+y.newText+o.substring(d,o.length);else throw new Error("Overlapping edit");p=g}return o}e.applyEdits=n;function t(a,s){if(a.length<=1)return a;var o=a.length/2|0,l=a.slice(0,o),p=a.slice(o);t(l,s),t(p,s);for(var w=0,y=0,g=0;w<l.length&&y<p.length;){var d=s(l[w],p[y]);d<=0?a[g++]=l[w++]:a[g++]=p[y++]}for(;w<l.length;)a[g++]=l[w++];for(;y<p.length;)a[g++]=p[y++];return a}})(Ce||(Ce={}));var Qe=function(){function e(r,i,n,t){this._uri=r,this._languageId=i,this._version=n,this._content=t,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(r){if(r){var i=this.offsetAt(r.start),n=this.offsetAt(r.end);return this._content.substring(i,n)}return this._content},e.prototype.update=function(r,i){this._content=r.text,this._version=i,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var r=[],i=this._content,n=!0,t=0;t<i.length;t++){n&&(r.push(t),n=!1);var a=i.charAt(t);n=a==="\r"||a===`
`,a==="\r"&&t+1<i.length&&i.charAt(t+1)===`
`&&t++}n&&i.length>0&&r.push(i.length),this._lineOffsets=r}return this._lineOffsets},e.prototype.positionAt=function(r){r=Math.max(Math.min(r,this._content.length),0);var i=this.getLineOffsets(),n=0,t=i.length;if(t===0)return S.create(0,r);for(;n<t;){var a=Math.floor((n+t)/2);i[a]>r?t=a:n=a+1}var s=n-1;return S.create(s,r-i[s])},e.prototype.offsetAt=function(r){var i=this.getLineOffsets();if(r.line>=i.length)return this._content.length;if(r.line<0)return 0;var n=i[r.line],t=r.line+1<i.length?i[r.line+1]:this._content.length;return Math.max(Math.min(n+r.character,t),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),u;(function(e){var r=Object.prototype.toString;function i(d){return typeof d<"u"}e.defined=i;function n(d){return typeof d>"u"}e.undefined=n;function t(d){return d===!0||d===!1}e.boolean=t;function a(d){return r.call(d)==="[object String]"}e.string=a;function s(d){return r.call(d)==="[object Number]"}e.number=s;function o(d,x,O){return r.call(d)==="[object Number]"&&x<=d&&d<=O}e.numberRange=o;function l(d){return r.call(d)==="[object Number]"&&-2147483648<=d&&d<=2147483647}e.integer=l;function p(d){return r.call(d)==="[object Number]"&&0<=d&&d<=2147483647}e.uinteger=p;function w(d){return r.call(d)==="[object Function]"}e.func=w;function y(d){return d!==null&&typeof d=="object"}e.objectLiteral=y;function g(d,x){return Array.isArray(d)&&d.every(x)}e.typedArray=g})(u||(u={}));function _(e){return{ofRule:e}}function f(e,r){return{ofRule:e,isList:!0,separator:r}}function ze(e,r){const i=e.match;return e.match=n=>{let t=!1;return i&&(t=i(n)),t&&r.every(a=>a.match&&!a.match(n))},e}function z(e,r){return{style:r,match:i=>i.kind===e}}function c(e,r){return{style:r||"punctuation",match:i=>i.kind==="Punctuation"&&i.value===e}}f("Definition"),E("query"),_(v("def")),_("VariableDefinitions"),f("Directive"),E("mutation"),_(v("def")),_("VariableDefinitions"),f("Directive"),E("subscription"),_(v("def")),_("VariableDefinitions"),f("Directive"),c("("),f("VariableDefinition"),c(")"),c(":"),_("DefaultValue"),c("$","variable"),v("variable"),c("="),c("{"),f("Selection"),c("}"),v("property"),c(":"),v("qualifier"),_("Arguments"),f("Directive"),_("SelectionSet"),v("property"),_("Arguments"),f("Directive"),_("SelectionSet"),c("("),f("Argument"),c(")"),v("attribute"),c(":"),c("..."),v("def"),f("Directive"),c("..."),_("TypeCondition"),f("Directive"),E("fragment"),_(ze(v("def"),[E("on")])),f("Directive"),E("on"),z("Number","number"),z("Name","builtin"),z("Name","keyword"),v("string-2"),c("["),f("Value"),c("]"),c("{"),f("ObjectField"),c("}"),v("attribute"),c(":"),c("["),c("]"),_(c("!")),_(c("!")),He("atom"),c("@","meta"),v("meta"),_("Arguments"),E("directive"),c("@","meta"),v("meta"),_("ArgumentsDef"),E("on"),f("DirectiveLocation",c("|")),E("interface"),v("atom"),_("Implements"),f("Directive"),c("{"),f("FieldDef"),c("}"),E("implements"),f("NamedType",c("&")),v("string-2"),E("schema"),f("Directive"),c("{"),f("OperationTypeDef"),c("}"),v("keyword"),c(":"),v("atom"),E("scalar"),v("atom"),f("Directive"),E("type"),v("atom"),_("Implements"),f("Directive"),c("{"),f("FieldDef"),c("}"),v("property"),_("ArgumentsDef"),c(":"),f("Directive"),c("("),f("InputValueDef"),c(")"),v("attribute"),c(":"),_("DefaultValue"),f("Directive"),E("union"),v("atom"),f("Directive"),c("="),f("UnionMember",c("|")),E("enum"),v("atom"),f("Directive"),c("{"),f("EnumValueDef"),c("}"),v("string-2"),f("Directive"),E("input"),v("atom"),f("Directive"),c("{"),f("InputValueDef"),c("}"),E("extend");function E(e){return{style:"keyword",match:r=>r.kind==="Name"&&r.value===e}}function v(e){return{style:e,match:r=>r.kind==="Name",update(r,i){r.name=i.value}}}function He(e){return{style:e,match:r=>r.kind==="Name",update(r,i){r.prevState&&r.prevState.prevState&&(r.name=i.value,r.prevState.prevState.type=i.value)}}}const Je={ALIASED_FIELD:"AliasedField",ARGUMENTS:"Arguments",SHORT_QUERY:"ShortQuery",QUERY:"Query",MUTATION:"Mutation",SUBSCRIPTION:"Subscription",TYPE_CONDITION:"TypeCondition",INVALID:"Invalid",COMMENT:"Comment",SCHEMA_DEF:"SchemaDef",SCALAR_DEF:"ScalarDef",OBJECT_TYPE_DEF:"ObjectTypeDef",OBJECT_VALUE:"ObjectValue",LIST_VALUE:"ListValue",INTERFACE_DEF:"InterfaceDef",UNION_DEF:"UnionDef",ENUM_DEF:"EnumDef",ENUM_VALUE:"EnumValue",FIELD_DEF:"FieldDef",INPUT_DEF:"InputDef",INPUT_VALUE_DEF:"InputValueDef",ARGUMENTS_DEF:"ArgumentsDef",EXTEND_DEF:"ExtendDef",DIRECTIVE_DEF:"DirectiveDef",IMPLEMENTS:"Implements",VARIABLE_DEFINITIONS:"VariableDefinitions",TYPE:"Type"};({...je,...Je});var X={exports:{}};function Re(e,r){if(e!=null)return e;var i=new Error(r!==void 0?r:"Got unexpected "+e);throw i.framesToPop=1,i}X.exports=Re;X.exports.default=Re;Object.defineProperty(X.exports,"__esModule",{value:!0});var h;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(h||(h={}));const Le=e=>"getModeId"in e?e.getModeId():e.getLanguageId(),Be=e=>{const{schema:r,documentAST:i,introspectionJSON:n,introspectionJSONString:t,documentString:a,...s}=e;if(r)return{...s,documentString:Y(r)};if(t)return{...s,introspectionJSONString:t};if(a)return{...s,documentString:a};if(n)return{...s,introspectionJSONString:JSON.stringify(n)};if(i){const o=Ue(i,s.buildSchemaOptions);return{...s,documentString:Y(o)}}throw Error("no schema supplied")},$e=2*60*1e3;class qe{constructor(r){this._defaults=r,this._worker=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker()),this._client=null}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>$e&&this._stopWorker()}async _getClient(){if(this._lastUsedTime=Date.now(),!this._client)try{this._worker=T.createWebWorker({moduleId:"monaco-graphql/esm/GraphQLWorker.js",label:this._defaults.languageId,createData:{languageId:this._defaults.languageId,formattingOptions:this._defaults.formattingOptions,languageConfig:{schemas:this._defaults.schemas?.map(Be),exteralFragmentDefinitions:this._defaults.externalFragmentDefinitions}}}),this._client=await this._worker.getProxy()}catch(r){console.error("error loading worker",r)}return this._client}async getLanguageServiceWorker(...r){const i=await this._getClient();return await this._worker.withSyncedResources(r),i}}class Xe{constructor(r,i){this.defaults=r,this._worker=i,this._disposables=[],this._listener=Object.create(null),this._worker=i;const n=a=>{const s=Le(a);if(s!==this.defaults.languageId)return;const o=a.uri.toString(),l=r.diagnosticSettings?.validateVariablesJSON&&r.diagnosticSettings.validateVariablesJSON[o];let p;this._listener[o]=a.onDidChangeContent(()=>{clearTimeout(p),p=setTimeout(()=>{this._doValidate(a.uri,s,l)},200)}),this._doValidate(a.uri,s,l)},t=a=>{T.setModelMarkers(a,this.defaults.languageId,[]);const s=a.uri.toString(),o=this._listener[s];o&&(o.dispose(),delete this._listener[s])};this._disposables.push(T.onDidCreateModel(n)),this._disposables.push(T.onWillDisposeModel(a=>{t(a)})),this._disposables.push(T.onDidChangeModelLanguage(a=>{t(a.model),n(a.model)})),this._disposables.push({dispose:()=>{for(const a in this._listener)this._listener[a].dispose()}}),this._disposables.push(r.onDidChange(()=>{T.getModels().forEach(a=>{Le(a)===this.defaults.languageId&&(t(a),n(a))})})),T.getModels().forEach(n)}dispose(){this._disposables.forEach(r=>r&&r.dispose()),this._disposables=[]}async _doValidate(r,i,n){const t=await this._worker(r),a=await t.doValidation(r.toString());if(T.setModelMarkers(T.getModel(r),i,a),n){if(n.length<1)throw Error("no variables URI strings provided to validate");const s=await t.doGetVariablesJSONSchema(r.toString());if(!s)return;const l={uri:We.file(n[0].replace(".json","-schema.json")).toString(),schema:s,fileMatch:n};I.json.jsonDefaults.setDiagnosticsOptions({schemaValidation:"error",validate:!0,...this.defaults?.diagnosticSettings?.jsonDiagnosticSettings,schemas:[l],enableSchemaRequest:!1})}}}const m=I.CompletionItemKind;function Ge(e){switch(e){case h.Text:return m.Text;case h.Method:return m.Method;case h.Function:return m.Function;case h.Constructor:return m.Constructor;case h.Field:return m.Field;case h.Variable:return m.Variable;case h.Class:return m.Class;case h.Interface:return m.Interface;case h.Module:return m.Module;case h.Property:return m.Property;case h.Unit:return m.Unit;case h.Value:return m.Value;case h.Enum:return m.Enum;case h.Keyword:return m.Keyword;case h.Snippet:return m.Snippet;case h.Color:return m.Color;case h.File:return m.File;case h.Reference:return m.Reference;case h.Folder:return m.Folder;case h.EnumMember:return m.EnumMember;case h.Constant:return m.Constant;case h.Struct:return m.Struct;case h.Event:return m.Event;case h.Operator:return m.Operator;case h.TypeParameter:return m.TypeParameter;default:return m.Text}}function Ye(e){return{range:e.range,kind:Ge(e.kind),label:e.label,insertText:e.insertText??e.label,insertTextRules:e.insertText?I.CompletionItemInsertTextRule.InsertAsSnippet:void 0,sortText:e.sortText,filterText:e.filterText,documentation:e.documentation,detail:e.detail,command:e.command}}class Ze{constructor(r){this._worker=r,this._worker=r}get triggerCharacters(){return[":","$",`
`," ","(","@"]}async provideCompletionItems(r,i,n,t){try{const a=r.uri,o=await(await this._worker(r.uri)).doComplete(a.toString(),i);return{incomplete:!0,suggestions:o.map(Ye)}}catch(a){return console.error(`Error fetching completion items

${a}`),{suggestions:[]}}}}class Ke{constructor(r){this._worker=r,this._worker=r}async provideDocumentFormattingEdits(r,i,n){const a=await(await this._worker(r.uri)).doFormat(r.uri.toString());return a?[{range:r.getFullModelRange(),text:a}]:[]}}class et{constructor(r){this._worker=r}async provideHover(r,i,n){const t=r.uri,s=await(await this._worker(r.uri)).doHover(t.toString(),i);return s?{range:s.range,contents:[{value:s.content}]}:{contents:[]}}dispose(){}}function nt(e){const r=[],i=[],n=new qe(e);r.push(n);const t=(...g)=>{try{return n.getLanguageServiceWorker(...g)}catch{throw Error("Error fetching graphql language service worker")}};function a(){const{modeConfiguration:g}=e;g.documentFormattingEdits&&i.push(I.registerDocumentFormattingEditProvider(e.languageId,new Ke(t)))}function s(g){const{modeConfiguration:d}=e;Pe(i),d.completionItems&&i.push(I.registerCompletionItemProvider(e.languageId,new Ze(t))),d.diagnostics&&i.push(new Xe(g,t)),d.hovers&&i.push(I.registerHoverProvider(e.languageId,new et(t))),a()}let{modeConfiguration:o,formattingOptions:l,diagnosticSettings:p,externalFragmentDefinitions:w,schemas:y}=e;return s(e),e.onDidChange(g=>{g.modeConfiguration!==o&&(o=g.modeConfiguration,s(g)),g.formattingOptions!==l&&(l=g.formattingOptions,a()),g.externalFragmentDefinitions!==w&&(w=g.externalFragmentDefinitions,s(g)),g.diagnosticSettings!==p&&(p=g.diagnosticSettings,s(g)),g.schemas!==y&&(y=g.schemas,s(g))}),r.push(Oe(i)),Oe(r)}function Oe(e){return{dispose:()=>Pe(e)}}function Pe(e){for(;e.length;)e.pop().dispose()}export{nt as setupMode};
